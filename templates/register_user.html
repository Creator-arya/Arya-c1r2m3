{% extends "base.html" %}

{% block title %}Gerenciar Usuários (Admin){% endblock %}

{% block content %}
<h3>Adicionar Novo Usuário</h3>
<form method="post" action="{{ url_for('admin_add_user') }}">
    <p>
        <label>Nome de usuário:</label><br>
        <input type="text" name="username" required>
    </p>
    <p>
        <label>Senha:</label><br>
        <input type="password" name="password" required>
    </p>
    <p>
        <label>Comissão padrão (ex: 50.00 ou 5.5):</label><br>
        <input type="number" step="0.01" name="commission" min="0" value="0.00">
    </p>
    <button type="submit">Criar Usuário</button>
</form>

<hr>

<h3>Usuários Cadastrados</h3>
{% if users %}
    <ul>
    {% for u in users %}
        <li>
            <strong>{{ u.username }}</strong>
            {% if not u.is_admin %}— Comissão padrão: R$ {{ "%.2f"|format(u.commission_default) }}{% endif %}
            {% if u.is_admin %}<em> (admin)</em>{% endif %}
        </li>
    {% endfor %}
    </ul>
{% else %}
    <p>Nenhum usuário além do admin.</p>
{% endif %}
{% endblock %}